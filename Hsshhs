--[[RMPG Obsfucated | 2025-11-19 22:31:54 | id:305735]] (function() local __b = "bG9jYWwgbGlicmFyeSA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vVGhlTWFuV2hvQ2FudEJlTW92ZS1EL0RPRlMvcmVmcy9oZWFkcy9tYWluL1NodXNoIiwgdHJ1ZSkpKCkKCi0tLy8gQ3JlYXRlIFdpbmRvdwpsb2NhbCB3aW5kb3cgPSBsaWJyYXJ5OkFkZFdpbmRvdygiVHJpcGxlIFggfCBQQUlEIHwgRGVvYnNmdWNhdGVkIGJ5IFJNUEdfU2VuIiwgewoJbWFpbl9jb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCksCgltaW5fc2l6ZSA9IFZlY3RvcjIubmV3KDcwMCwgNzAwKSwKCWNhbl9yZXNpemUgPSBmYWxzZQp9KQoKLS0vLyBDcmVhdGUgVGFicwpsb2NhbCB0YWIyID0gd2luZG93OkFkZFRhYigiRmFzdCBSZWJpcnRoIikKbG9jYWwgdGFiMSA9IHdpbmRvdzpBZGRUYWIoIkZhc3QgU3RyZW5ndGgiKQpsb2NhbCB0YWIzID0gd2luZG93OkFkZFRhYigiRmFybWluZyIpCmxvY2FsIHRhYjQgPSB3aW5kb3c6QWRkVGFiKCJGYXN0IEtpbGxpbmciKQpsb2NhbCB0YWI1ID0gd2luZG93OkFkZFRhYigiSW52ZW50IikKbG9jYWwgdGFiNiA9IHdpbmRvdzpBZGRUYWIoIlNweSBTdGF0cyIpCmxvY2FsIHRhYjcgPSB3aW5kb3c6QWRkVGFiKCJTdGF0cyIpCmxvY2FsIHRhYjggPSB3aW5kb3c6QWRkVGFiKCJDYWxjdWxhdG9yIikKbG9jYWwgdGFiOSA9IHdpbmRvdzpBZGRUYWIoIk1pc2MiKQoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgUmVwbGljYXRlZFN0b3JhZ2UgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikKbG9jYWwgVUlTID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCi0tIENyZWF0ZSB0aGUgbGFiZWwgaW4geW91ciBVSQpsb2NhbCByZWJpcnRoU3RhdHNMYWJlbCA9IHRhYjI6QWRkTGFiZWwoIlJlYmlydGhzOiAwLjAwL01pbiB8IDAuMDAvSFIgfCAwLjAwL1dlZWsgfCAwLjAwL01vbnRoIikKCnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgLS0gV2FpdCB1bnRpbCBsZWFkZXJzdGF0cyBhbmQgUmViaXJ0aHMgdmFsdWUgZXhpc3QKICAgIGxvY2FsIGxlYWRlcnN0YXRzID0gTG9jYWxQbGF5ZXI6V2FpdEZvckNoaWxkKCJsZWFkZXJzdGF0cyIpCiAgICBsb2NhbCByZWJpcnRoc1ZhbHVlID0gbGVhZGVyc3RhdHM6V2FpdEZvckNoaWxkKCJSZWJpcnRocyIpCgogICAgLS0gQmFzZWxpbmU6IHRyYWNrIHJlYmlydGhzIGF0IHRoZSBtb21lbnQgdGhlIHNjcmlwdCBzdGFydHMKICAgIGxvY2FsIHJlYmlydGhzU3RhcnQgPSByZWJpcnRoc1ZhbHVlLlZhbHVlCiAgICBsb2NhbCBzdGFydFRpbWUgPSBvcy50aW1lKCkKCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgbG9jYWwgY3VycmVudFJlYmlydGhzID0gcmViaXJ0aHNWYWx1ZS5WYWx1ZQogICAgICAgIGxvY2FsIGVsYXBzZWQgPSBvcy50aW1lKCkgLSBzdGFydFRpbWUKCiAgICAgICAgaWYgZWxhcHNlZCA+IDAgdGhlbgogICAgICAgICAgICBsb2NhbCBnYWluZWQgPSBjdXJyZW50UmViaXJ0aHMgLSByZWJpcnRoc1N0YXJ0CiAgICAgICAgICAgIGxvY2FsIHBlck1pbnV0ZSA9IGdhaW5lZCAvIChlbGFwc2VkIC8gNjApCiAgICAgICAgICAgIGxvY2FsIHBlckhvdXIgPSBwZXJNaW51dGUgKiA2MAogICAgICAgICAgICBsb2NhbCBwZXJXZWVrID0gcGVySG91ciAqIDI0ICogNwogICAgICAgICAgICBsb2NhbCBwZXJNb250aCA9IHBlckhvdXIgKiAyNCAqIDMwCgogICAgICAgICAgICByZWJpcnRoU3RhdHNMYWJlbC5UZXh0ID0gc3RyaW5nLmZvcm1hdCgKICAgICAgICAgICAgICAgICJSZWJpcnRoczogJS4yZi9NaW4gfCAlLjJmL0hSIHwgJS4yZi9XZWVrIHwgJS4yZi9Nb250aCIsCiAgICAgICAgICAgICAgICBwZXJNaW51dGUsIHBlckhvdXIsIHBlcldlZWssIHBlck1vbnRoCiAgICAgICAgICAgICkKICAgICAgICBlbmQKCiAgICAgICAgdGFzay53YWl0KDEwKSAtLSBVcGRhdGUgZXZlcnkgMTAgc2Vjb25kcwogICAgZW5kCmVuZCkKCi0tLy8gPT09PT09PT09PSBDVVJSRU5UIFJFQklSVEggTEFCRUwgPT09PT09PT09PQpsb2NhbCBSZWJpcnRoQ291bnRMYWJlbCA9IHRhYjI6QWRkTGFiZWwoIlJlYmlydGhzOiAwIikKCnRhc2suc3Bhd24oZnVuY3Rpb24oKQoJd2hpbGUgdGFzay53YWl0KDEpIGRvCgkJbG9jYWwgbGVhZGVyc3RhdHMgPSBMb2NhbFBsYXllcjpGaW5kRmlyc3RDaGlsZCgibGVhZGVyc3RhdHMiKQoJCWlmIGxlYWRlcnN0YXRzIGFuZCBsZWFkZXJzdGF0czpGaW5kRmlyc3RDaGlsZCgiUmViaXJ0aHMiKSB0aGVuCgkJCVJlYmlydGhDb3VudExhYmVsLlRleHQgPSAiUmViaXJ0aHM6ICIgLi4gbGVhZGVyc3RhdHMuUmViaXJ0aHMuVmFsdWUKCQllbmQKCWVuZAplbmQpCgotLS8vID09PT09PT09PT0gUElORyBMQUJFTCA9PT09PT09PT09CmxvY2FsIFBpbmdMYWJlbCA9IHRhYjI6QWRkTGFiZWwoIlBpbmc6IDBtcyIpCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKCXdoaWxlIHRhc2sud2FpdCgxKSBkbwoJCWxvY2FsIHBpbmcgPSBtYXRoLmZsb29yKGdhbWU6R2V0U2VydmljZSgiU3RhdHMiKS5OZXR3b3JrLlNlcnZlclN0YXRzSXRlbVsiRGF0YSBQaW5nIl06R2V0VmFsdWUoKSkKCQlQaW5nTGFiZWwuVGV4dCA9ICJQaW5nOiAiIC4uIHBpbmcgLi4gIm1zIgoJZW5kCmVuZCkKCi0tLy8gPT09PT09PT09PSBGQVNUIFJFQklSVEggVE9HR0xFID09PT09PT09PT0KdGFiMjpBZGRTd2l0Y2goIkZhc3QgUmViaXJ0aCIsIGZ1bmN0aW9uKGJvb2wpCglmYXN0UmViaXJ0aCA9IGJvb2wKCglpZiBmYXN0UmViaXJ0aCB0aGVuCgkJc3Bhd24oZnVuY3Rpb24oKQoJCQlsb2NhbCBhID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpCgkJCWxvY2FsIGIgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQoJCQlsb2NhbCBjID0gYi5Mb2NhbFBsYXllcgoKCQkJbG9jYWwgZCA9IGZ1bmN0aW9uKGUpCgkJCQlsb2NhbCBmID0gYy5wZXRzRm9sZGVyCgkJCQlmb3IgZywgaCBpbiBwYWlycyhmOkdldENoaWxkcmVuKCkpIGRvCgkJCQkJaWYgaDpJc0EoIkZvbGRlciIpIHRoZW4KCQkJCQkJZm9yIGksIGogaW4gcGFpcnMoaDpHZXRDaGlsZHJlbigpKSBkbwoJCQkJCQkJYS5yRXZlbnRzLmVxdWlwUGV0RXZlbnQ6RmlyZVNlcnZlcigidW5lcXVpcFBldCIsIGopCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCQl0YXNrLndhaXQoLjEpCgkJCWVuZAoKCQkJbG9jYWwgayA9IGZ1bmN0aW9uKGwpCgkJCQlkKCkKCQkJCXRhc2sud2FpdCguMDEpCgkJCQlmb3IgbSwgbiBpbiBwYWlycyhjLnBldHNGb2xkZXIuVW5pcXVlOkdldENoaWxkcmVuKCkpIGRvCgkJCQkJaWYgbi5OYW1lID09IGwgdGhlbgoJCQkJCQlhLnJFdmVudHMuZXF1aXBQZXRFdmVudDpGaXJlU2VydmVyKCJlcXVpcFBldCIsIG4pCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgoJCQlsb2NhbCBvID0gZnVuY3Rpb24ocCkKCQkJCWxvY2FsIHEgPSB3b3Jrc3BhY2UubWFjaGluZXNGb2xkZXI6RmluZEZpcnN0Q2hpbGQocCkKCQkJCWlmIG5vdCBxIHRoZW4KCQkJCQlmb3IgciwgcyBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJCQkJaWYgczpJc0EoIkZvbGRlciIpIGFuZCBzLk5hbWU6ZmluZCgibWFjaGluZXMiKSB0aGVuCgkJCQkJCQlxID0gczpGaW5kRmlyc3RDaGlsZChwKQoJCQkJCQkJaWYgcSB0aGVuIGJyZWFrIGVuZAoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoJCQkJcmV0dXJuIHEKCQkJZW5kCgoJCQlsb2NhbCB0ID0gZnVuY3Rpb24oKQoJCQkJbG9jYWwgdSA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpCgkJCQl1OlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKQoJCQkJdGFzay53YWl0KC4xKQoJCQkJdTpTZW5kS2V5RXZlbnQoZmFsc2UsICJFIiwgZmFsc2UsIGdhbWUpCgkJCWVuZAoKCQkJd2hpbGUgZmFzdFJlYmlydGggZG8KCQkJCWxvY2FsIHYgPSBjLmxlYWRlcnN0YXRzLlJlYmlydGhzLlZhbHVlCgkJCQlsb2NhbCB3ID0gMTAwMDAgKyAoNTAwMCAqIHYpCgkJCQlpZiBjLnVsdGltYXRlc0ZvbGRlcjpGaW5kRmlyc3RDaGlsZCgiR29sZGVuIFJlYmlydGgiKSB0aGVuCgkJCQkJbG9jYWwgeCA9IGMudWx0aW1hdGVzRm9sZGVyWyJHb2xkZW4gUmViaXJ0aCJdLlZhbHVlCgkJCQkJdyA9IG1hdGguZmxvb3IodyAqICgxIC0gKHggKiAwLjEpKSkKCQkJCWVuZAoKCQkJCWQoKQoJCQkJdGFzay53YWl0KC4xKQoJCQkJaygiU3dpZnQgU2FtdXJhaSIpCgoJCQkJd2hpbGUgYy5sZWFkZXJzdGF0cy5TdHJlbmd0aC5WYWx1ZSA8IHcgZG8KCQkJCQlmb3IgeSA9IDEsIDEwIGRvCgkJCQkJCWMubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicmVwIikKCQkJCQllbmQKCQkJCQl0YXNrLndhaXQoKQoJCQkJZW5kCgoJCQkJZCgpCgkJCQl0YXNrLndhaXQoLjEpCgkJCQlrKCJUcmliYWwgT3ZlcmxvcmQiKQoKCQkJCWxvY2FsIHogPSBvKCJKdW5nbGUgQmFyIExpZnQiKQoJCQkJaWYgeiBhbmQgejpGaW5kRmlyc3RDaGlsZCgiaW50ZXJhY3RTZWF0IikgdGhlbgoJCQkJCWMuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gei5pbnRlcmFjdFNlYXQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAzLCAwKQoJCQkJCXJlcGVhdAoJCQkJCQl0YXNrLndhaXQoLjEpCgkJCQkJCXQoKQoJCQkJCXVudGlsIGMuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdAoJCQkJZW5kCgoJCQkJbG9jYWwgQSA9IGMubGVhZGVyc3RhdHMuUmViaXJ0aHMuVmFsdWUKCQkJCXJlcGVhdAoJCQkJCWEuckV2ZW50cy5yZWJpcnRoUmVtb3RlOkludm9rZVNlcnZlcigicmViaXJ0aFJlcXVlc3QiKQoJCQkJCXRhc2sud2FpdCguMSkKCQkJCXVudGlsIGMubGVhZGVyc3RhdHMuUmViaXJ0aHMuVmFsdWUgPiBBCgoJCQkJdGFzay53YWl0KCkKCQkJZW5kCgkJZW5kKQoJZW5kCmVuZCkKCi0tLy8gPT09PT09PT09PSBUSElOR1MgTEFCRUwgPT09PT09PT09PQp0YWIyOkFkZExhYmVsKCJUaGluZ3MiKQoKLS0vLyA9PT09PT09PT09IExPQ0sgUE9TSVRJT04gVE9HR0xFID09PT09PT09PT0KbG9jYWwgTG9ja0Nvbm5lY3Rpb24xLCBMb2NrQ29ubmVjdGlvbjIKbG9jYWwgaXNMb2NrZWQgPSBmYWxzZQoKdGFiMjpBZGRTd2l0Y2goIkxvY2sgUG9zaXRpb24iLCBmdW5jdGlvbihzdGF0ZSkKCWlzTG9ja2VkID0gc3RhdGUKCWxvY2FsIGNoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKCWlmIG5vdCBjaGFyIHRoZW4gcmV0dXJuIGVuZAoJbG9jYWwgaHJwID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCglsb2NhbCBodW0gPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCglpZiBub3QgaHJwIG9yIG5vdCBodW0gdGhlbiByZXR1cm4gZW5kCgoJaWYgaXNMb2NrZWQgdGhlbgoJCWxvY2FsIGxvY2tlZENGcmFtZSA9IGhycC5DRnJhbWUKCQlodW0uV2Fsa1NwZWVkID0gMAoJCWh1bS5KdW1wUG93ZXIgPSAwCgkJaHVtLlBsYXRmb3JtU3RhbmQgPSB0cnVlCgoJCUxvY2tDb25uZWN0aW9uMSA9IFJ1blNlcnZpY2UuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQoJCQlpZiBpc0xvY2tlZCBhbmQgaHJwIHRoZW4KCQkJCWhycC5DRnJhbWUgPSBsb2NrZWRDRnJhbWUKCQkJZW5kCgkJZW5kKQoKCQlMb2NrQ29ubmVjdGlvbjIgPSBVSVMuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQoJCQlpZiBpc0xvY2tlZCB0aGVuCgkJCQlpbnB1dDpDYXB0dXJlKCkKCQkJZW5kCgkJZW5kKQoJZWxzZQoJCWlmIGh1bSB0aGVuCgkJCWh1bS5XYWxrU3BlZWQgPSAxNgoJCQlodW0uSnVtcFBvd2VyID0gNTAKCQkJaHVtLlBsYXRmb3JtU3RhbmQgPSBmYWxzZQoJCWVuZAoJCWlmIExvY2tDb25uZWN0aW9uMSB0aGVuIExvY2tDb25uZWN0aW9uMTpEaXNjb25uZWN0KCkgZW5kCgkJaWYgTG9ja0Nvbm5lY3Rpb24yIHRoZW4gTG9ja0Nvbm5lY3Rpb24yOkRpc2Nvbm5lY3QoKSBlbmQKCWVuZAplbmQpCgotLS8vID09PT09PT09PT0gSElERSBGUkFNRVMgVE9HR0xFID09PT09PT09PT0KdGFiMjpBZGRTd2l0Y2goIkhpZGUgRnJhbWVzIiwgZnVuY3Rpb24oYm9vbCkKCWZvciBfLCBvYmogaW4gcGFpcnMoUmVwbGljYXRlZFN0b3JhZ2U6R2V0Q2hpbGRyZW4oKSkgZG8KCQlpZiBvYmouTmFtZTptYXRjaCgiRnJhbWUkIikgdGhlbgoJCQlvYmouVmlzaWJsZSA9IG5vdCBib29sCgkJZW5kCgllbmQKZW5kKQoKLS0vLyA9PT09PT09PT09IEhJREUgUEVUUyBUT0dHTEUgPT09PT09PT09PQp0YWIyOkFkZFN3aXRjaCgiSGlkZSBQZXRzIiwgZnVuY3Rpb24oc3RhdGUpCglpZiBzdGF0ZSB0aGVuCgkJUmVwbGljYXRlZFN0b3JhZ2UuckV2ZW50cy5zaG93UGV0c0V2ZW50OkZpcmVTZXJ2ZXIoImhpZGVQZXRzIikKCWVsc2UKCQlSZXBsaWNhdGVkU3RvcmFnZS5yRXZlbnRzLnNob3dQZXRzRXZlbnQ6RmlyZVNlcnZlcigic2hvd1BldHMiKQoJZW5kCmVuZCkKCi0tLy8gPT09PT09PT09PSBPVEhFUiBMQUJFTCA9PT09PT09PT09CnRhYjI6QWRkTGFiZWwoIk90aGVyIikKCi0tLy8gPT09PT09PT09PSBFUVVJUCBUUklCQUwgT1ZFUkxPUkQgQlVUVE9OID09PT09PT09PT0KbG9jYWwgZnVuY3Rpb24gZXF1aXBVbmlxdWVQZXQocGV0TmFtZSkKCWxvY2FsIGMgPSBMb2NhbFBsYXllcgoJbG9jYWwgcGV0c0ZvbGRlciA9IGM6V2FpdEZvckNoaWxkKCJwZXRzRm9sZGVyIikKCWZvciBfLCBmb2xkZXIgaW4gcGFpcnMocGV0c0ZvbGRlci5VbmlxdWU6R2V0Q2hpbGRyZW4oKSkgZG8KCQlpZiBmb2xkZXIuTmFtZSA9PSBwZXROYW1lIHRoZW4KCQkJUmVwbGljYXRlZFN0b3JhZ2UuckV2ZW50cy5lcXVpcFBldEV2ZW50OkZpcmVTZXJ2ZXIoImVxdWlwUGV0IiwgZm9sZGVyKQoJCWVuZAoJZW5kCmVuZAoKdGFiMjpBZGRCdXR0b24oIkVxdWlwIFRyaWJhbCBPdmVybG9yZCIsIGZ1bmN0aW9uKCkKCWVxdWlwVW5pcXVlUGV0KCJUcmliYWwgT3ZlcmxvcmQiKQplbmQpCgpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgotLSBDcmVhdGUgdGhlIGxhYmVsIGluIHlvdXIgVUkKbG9jYWwgc3RyZW5ndGhMYWJlbCA9IHRhYjE6QWRkTGFiZWwoIlN0cmVuZ3RoOiAwLjAwL01pbiB8IDAuMDAvSFIgfCAwLjAwL1dlZWsgfCAwLjAwL01vbnRoIikKCnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgLS0gV2FpdCB1bnRpbCBsZWFkZXJzdGF0cyBhbmQgU3RyZW5ndGggdmFsdWUgZXhpc3QKICAgIGxvY2FsIGxlYWRlcnN0YXRzID0gTG9jYWxQbGF5ZXI6V2FpdEZvckNoaWxkKCJsZWFkZXJzdGF0cyIpCiAgICBsb2NhbCBzdHJlbmd0aFZhbHVlID0gbGVhZGVyc3RhdHM6V2FpdEZvckNoaWxkKCJTdHJlbmd0aCIpCgogICAgLS0gQmFzZWxpbmU6IHN0YXJ0aW5nIHN0cmVuZ3RoCiAgICBsb2NhbCBzdHJlbmd0aFN0YXJ0ID0gc3RyZW5ndGhWYWx1ZS5WYWx1ZQogICAgbG9jYWwgc3RhcnRUaW1lID0gb3MudGltZSgpCgogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGxvY2FsIGVsYXBzZWQgPSBvcy50aW1lKCkgLSBzdGFydFRpbWUKICAgICAgICBpZiBlbGFwc2VkID4gMCB0aGVuCiAgICAgICAgICAgIGxvY2FsIGdhaW4gPSBzdHJlbmd0aFZhbHVlLlZhbHVlIC0gc3RyZW5ndGhTdGFydAogICAgICAgICAgICBsb2NhbCBwZXJNaW51dGUgPSBnYWluIC8gKGVsYXBzZWQgLyA2MCkKICAgICAgICAgICAgbG9jYWwgcGVySG91ciA9IHBlck1pbnV0ZSAqIDYwCiAgICAgICAgICAgIGxvY2FsIHBlcldlZWsgPSBwZXJIb3VyICogMjQgKiA3CiAgICAgICAgICAgIGxvY2FsIHBlck1vbnRoID0gcGVySG91ciAqIDI0ICogMzAKCiAgICAgICAgICAgIHN0cmVuZ3RoTGFiZWwuVGV4dCA9IHN0cmluZy5mb3JtYXQoCiAgICAgICAgICAgICAgICAiU3RyZW5ndGg6ICUuMmYvTWluIHwgJS4yZi9IUiB8ICUuMmYvV2VlayB8ICUuMmYvTW9udGgiLAogICAgICAgICAgICAgICAgcGVyTWludXRlLCBwZXJIb3VyLCBwZXJXZWVrLCBwZXJNb250aAogICAgICAgICAgICApCiAgICAgICAgZW5kCgogICAgICAgIHRhc2sud2FpdCgxMCkgLS0gdXBkYXRlIGV2ZXJ5IDEwIHNlY29uZHMKICAgIGVuZAplbmQpCgpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgotLSBDcmVhdGUgdGhlIGxhYmVsIGluIHlvdXIgVUkKbG9jYWwgZHVyYWJpbGl0eUxhYmVsID0gdGFiMTpBZGRMYWJlbCgiRHVyYWJpbGl0eTogMC4wMC9NaW4gfCAwLjAwL0hSIHwgMC4wMC9XZWVrIHwgMC4wMC9Nb250aCIpCgotLSBGdW5jdGlvbiB0byBzYWZlbHkgZ2V0IER1cmFiaWxpdHkgdmFsdWUKbG9jYWwgZnVuY3Rpb24gR2V0RHVyYWJpbGl0eShwbGF5ZXIpCiAgICAtLSBDaGVjayBsZWFkZXJzdGF0cyBmaXJzdAogICAgaWYgcGxheWVyOkZpbmRGaXJzdENoaWxkKCJsZWFkZXJzdGF0cyIpIHRoZW4KICAgICAgICBsb2NhbCBscyA9IHBsYXllci5sZWFkZXJzdGF0cwogICAgICAgIGlmIGxzOkZpbmRGaXJzdENoaWxkKCJEdXJhYmlsaXR5IikgdGhlbgogICAgICAgICAgICByZXR1cm4gbHMuRHVyYWJpbGl0eQogICAgICAgIGVuZAogICAgZW5kCgogICAgLS0gQ2hlY2sgZGlyZWN0IGNoaWxkCiAgICBpZiBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIkR1cmFiaWxpdHkiKSB0aGVuCiAgICAgICAgcmV0dXJuIHBsYXllci5EdXJhYmlsaXR5CiAgICBlbmQKCiAgICAtLSBDaGVjayBmb2xkZXJzIGluc2lkZSBwbGF5ZXIKICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhwbGF5ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBjaGlsZDpJc0EoIkZvbGRlciIpIGFuZCBjaGlsZDpGaW5kRmlyc3RDaGlsZCgiRHVyYWJpbGl0eSIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIGNoaWxkLkR1cmFiaWxpdHkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIHJldHVybiBuaWwKZW5kCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIC0tIFdhaXQgdW50aWwgRHVyYWJpbGl0eSBleGlzdHMKICAgIGxvY2FsIGR1cmFiaWxpdHlWYWx1ZSA9IG5pbAogICAgd2hpbGUgbm90IGR1cmFiaWxpdHlWYWx1ZSBkbwogICAgICAgIGR1cmFiaWxpdHlWYWx1ZSA9IEdldER1cmFiaWxpdHkoTG9jYWxQbGF5ZXIpCiAgICAgICAgdGFzay53YWl0KDEpCiAgICBlbmQKCiAgICAtLSBTZXQgYmFzZWxpbmUKICAgIGxvY2FsIGR1cmFiaWxpdHlTdGFydCA9IGR1cmFiaWxpdHlWYWx1ZS5WYWx1ZQogICAgbG9jYWwgc3RhcnRUaW1lID0gb3MudGltZSgpCgogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGxvY2FsIGVsYXBzZWQgPSBvcy50aW1lKCkgLSBzdGFydFRpbWUKICAgICAgICBpZiBlbGFwc2VkID4gMCB0aGVuCiAgICAgICAgICAgIGxvY2FsIGdhaW4gPSBkdXJhYmlsaXR5VmFsdWUuVmFsdWUgLSBkdXJhYmlsaXR5U3RhcnQKICAgICAgICAgICAgbG9jYWwgcGVyTWludXRlID0gZ2FpbiAvIChlbGFwc2VkIC8gNjApCiAgICAgICAgICAgIGxvY2FsIHBlckhvdXIgPSBwZXJNaW51dGUgKiA2MAogICAgICAgICAgICBsb2NhbCBwZXJXZWVrID0gcGVySG91ciAqIDI0ICogNwogICAgICAgICAgICBsb2NhbCBwZXJNb250aCA9IHBlckhvdXIgKiAyNCAqIDMwCgogICAgICAgICAgICBkdXJhYmlsaXR5TGFiZWwuVGV4dCA9IHN0cmluZy5mb3JtYXQoCiAgICAgICAgICAgICAgICAiRHVyYWJpbGl0eTogJS4yZi9NaW4gfCAlLjJmL0hSIHwgJS4yZi9XZWVrIHwgJS4yZi9Nb250aCIsCiAgICAgICAgICAgICAgICBwZXJNaW51dGUsIHBlckhvdXIsIHBlcldlZWssIHBlck1vbnRoCiAgICAgICAgICAgICkKICAgICAgICBlbmQKICAgICAgICB0YXNrLndhaXQoMTApIC0tIHVwZGF0ZSBldmVyeSAxMCBzZWNvbmRzCiAgICBlbmQKZW5kKQoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKCi0tIENyZWF0ZSB0aGUgbGFiZWxzIGluIHlvdXIgVUkKbG9jYWwgU3RyZW5ndGhMYWJlbCA9IHRhYjE6QWRkTGFiZWwoIlN0cmVuZ3RoOiAwIikKbG9jYWwgRHVyYWJpbGl0eUxhYmVsID0gdGFiMTpBZGRMYWJlbCgiRHVyYWJpbGl0eTogMCIpCmxvY2FsIFBpbmdMYWJlbCA9IHRhYjE6QWRkTGFiZWwoIlBpbmc6IDAgbXMiKQoKLS0gRnVuY3Rpb24gdG8gc2FmZWx5IGdldCBhIHN0YXQgKFN0cmVuZ3RoIG9yIER1cmFiaWxpdHkpCmxvY2FsIGZ1bmN0aW9uIEdldFN0YXQocGxheWVyLCBzdGF0TmFtZSkKICAgIC0tIENoZWNrIGxlYWRlcnN0YXRzIGZpcnN0CiAgICBpZiBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoImxlYWRlcnN0YXRzIikgYW5kIHBsYXllci5sZWFkZXJzdGF0czpGaW5kRmlyc3RDaGlsZChzdGF0TmFtZSkgdGhlbgogICAgICAgIHJldHVybiBwbGF5ZXIubGVhZGVyc3RhdHNbc3RhdE5hbWVdLlZhbHVlCiAgICBlbmQKICAgIC0tIENoZWNrIGRpcmVjdCBjaGlsZAogICAgaWYgcGxheWVyOkZpbmRGaXJzdENoaWxkKHN0YXROYW1lKSB0aGVuCiAgICAgICAgcmV0dXJuIHBsYXllcltzdGF0TmFtZV0uVmFsdWUKICAgIGVuZAogICAgLS0gQ2hlY2sgaW5zaWRlIGZvbGRlcnMKICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhwbGF5ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBjaGlsZDpJc0EoIkZvbGRlciIpIGFuZCBjaGlsZDpGaW5kRmlyc3RDaGlsZChzdGF0TmFtZSkgdGhlbgogICAgICAgICAgICByZXR1cm4gY2hpbGRbc3RhdE5hbWVdLlZhbHVlCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiAwCmVuZAoKLS0gRnVuY3Rpb24gdG8gZ2V0IHBsYXllciBwaW5nCmxvY2FsIGZ1bmN0aW9uIEdldFBpbmcoKQogICAgbG9jYWwgcGluZyA9IG1hdGguZmxvb3IoZ2FtZTpHZXRTZXJ2aWNlKCJTdGF0cyIpLk5ldHdvcmsuU2VydmVyU3RhdHNJdGVtWyJEYXRhIFBpbmciXTpHZXRWYWx1ZSgpKQogICAgcmV0dXJuIHBpbmcKZW5kCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgxKSBkbwogICAgICAgIC0tIFVwZGF0ZSBTdHJlbmd0aAogICAgICAgIGxvY2FsIHN0cmVuZ3RoID0gR2V0U3RhdChMb2NhbFBsYXllciwgIlN0cmVuZ3RoIikKICAgICAgICBTdHJlbmd0aExhYmVsLlRleHQgPSAiU3RyZW5ndGg6ICIgLi4gdG9zdHJpbmcoc3RyZW5ndGgpCgogICAgICAgIC0tIFVwZGF0ZSBEdXJhYmlsaXR5CiAgICAgICAgbG9jYWwgZHVyYWJpbGl0eSA9IEdldFN0YXQoTG9jYWxQbGF5ZXIsICJEdXJhYmlsaXR5IikKICAgICAgICBEdXJhYmlsaXR5TGFiZWwuVGV4dCA9ICJEdXJhYmlsaXR5OiAiIC4uIHRvc3RyaW5nKGR1cmFiaWxpdHkpCgogICAgICAgIC0tIFVwZGF0ZSBQaW5nCiAgICAgICAgbG9jYWwgcGluZyA9IEdldFBpbmcoKQogICAgICAgIFBpbmdMYWJlbC5UZXh0ID0gIlBpbmc6ICIgLi4gdG9zdHJpbmcocGluZykgLi4gIiBtcyIKICAgIGVuZAplbmQpCgotLSBBZGQgRmFzdCBTdHJlbmd0aCB0b2dnbGUgdG8gdGhlIEZhc3QgU3RyZW5ndGggdGFiCnRhYjE6QWRkU3dpdGNoKCJGYXN0IFN0cmVuZ3RoIiwgZnVuY3Rpb24oc3RhdGUpCiAgICBnZXRnZW52KCkuaXNHcmluZGluZyA9IHN0YXRlCgogICAgaWYgbm90IHN0YXRlIHRoZW4gcmV0dXJuIGVuZAoKICAgIC0tIFNwYXduIG11bHRpcGxlIHRocmVhZHMgdG8gc3BhbSByZXBzCiAgICBmb3IgXyA9IDEsIDMwIGRvCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIGdldGdlbnYoKS5pc0dyaW5kaW5nIGRvCiAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcgogICAgICAgICAgICAgICAgaWYgcGxheWVyIGFuZCBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIm11c2NsZUV2ZW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJyZXAiKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZCkKCmxvY2FsIGF1dG9FYXRFbmFibGVkID0gZmFsc2UKCmxvY2FsIGZ1bmN0aW9uIGVhdFByb3RlaW5FZ2coKQogICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICBsb2NhbCBiYWNrcGFjayA9IHBsYXllcjpXYWl0Rm9yQ2hpbGQoIkJhY2twYWNrIikKICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQoKICAgIGxvY2FsIGVnZyA9IGJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQcm90ZWluIEVnZyIpCiAgICBpZiBlZ2cgdGhlbgogICAgICAgIGVnZy5QYXJlbnQgPSBjaGFyYWN0ZXIKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGVnZzpBY3RpdmF0ZSgpCiAgICAgICAgZW5kKQogICAgZW5kCmVuZAoKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgaWYgYXV0b0VhdEVuYWJsZWQgdGhlbgogICAgICAgICAgICBlYXRQcm90ZWluRWdnKCkKICAgICAgICAgICAgdGFzay53YWl0KDM2MDApCiAgICAgICAgZWxzZQogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgp0YWIxOkFkZFN3aXRjaCgiQXV0byBFYXQgRWdnIHwgMUhvdXIiLCBmdW5jdGlvbihzdGF0ZSkKICAgIGF1dG9FYXRFbmFibGVkID0gc3RhdGUKZW5kKQoKbG9jYWwgYXV0b0VhdEVuYWJsZWQgPSBmYWxzZQoKbG9jYWwgZnVuY3Rpb24gZWF0UHJvdGVpbkVnZygpCiAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgIGxvY2FsIGJhY2twYWNrID0gcGxheWVyOldhaXRGb3JDaGlsZCgiQmFja3BhY2siKQogICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCgogICAgbG9jYWwgZWdnID0gYmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlByb3RlaW4gRWdnIikKICAgIGlmIGVnZyB0aGVuCiAgICAgICAgZWdnLlBhcmVudCA9IGNoYXJhY3RlcgogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZWdnOkFjdGl2YXRlKCkKICAgICAgICBlbmQpCiAgICBlbmQKZW5kCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICBpZiBhdXRvRWF0RW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGVhdFByb3RlaW5FZ2coKQogICAgICAgICAgICB0YXNrLndhaXQoMTgwMCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCnRhYjE6QWRkU3dpdGNoKCJBdXRvIEVhdCBFZ2cgfCAzME1pbnMiLCBmdW5jdGlvbihzdGF0ZSkKICAgIGF1dG9FYXRFbmFibGVkID0gc3RhdGUKZW5kKQoKdGFiMTpBZGRTd2l0Y2goIkhpZGUgRnJhbWVzIiwgZnVuY3Rpb24oYm9vbCkKCWZvciBfLCBvYmogaW4gcGFpcnMoUmVwbGljYXRlZFN0b3JhZ2U6R2V0Q2hpbGRyZW4oKSkgZG8KCQlpZiBvYmouTmFtZTptYXRjaCgiRnJhbWUkIikgdGhlbgoJCQlvYmouVmlzaWJsZSA9IG5vdCBib29sCgkJZW5kCgllbmQKZW5kKQoKLS0vLyA9PT09PT09PT09IEhJREUgUEVUUyBUT0dHTEUgPT09PT09PT09PQp0YWIxOkFkZFN3aXRjaCgiSGlkZSBQZXRzIiwgZnVuY3Rpb24oc3RhdGUpCglpZiBzdGF0ZSB0aGVuCgkJUmVwbGljYXRlZFN0b3JhZ2UuckV2ZW50cy5zaG93UGV0c0V2ZW50OkZpcmVTZXJ2ZXIoImhpZGVQZXRzIikKCWVsc2UKCQlSZXBsaWNhdGVkU3RvcmFnZS5yRXZlbnRzLnNob3dQZXRzRXZlbnQ6RmlyZVNlcnZlcigic2hvd1BldHMiKQoJZW5kCmVuZCkKCnRhYjE6QWRkTGFiZWwoIk90aGVyIikKCmxvY2FsIGZ1bmN0aW9uIGVxdWlwVW5pcXVlUGV0KHBldE5hbWUpCglsb2NhbCBjID0gTG9jYWxQbGF5ZXIKCWxvY2FsIHBldHNGb2xkZXIgPSBjOldhaXRGb3JDaGlsZCgicGV0c0ZvbGRlciIpCglmb3IgXywgZm9sZGVyIGluIHBhaXJzKHBldHNGb2xkZXIuVW5pcXVlOkdldENoaWxkcmVuKCkpIGRvCgkJaWYgZm9sZGVyLk5hbWUgPT0gcGV0TmFtZSB0aGVuCgkJCVJlcGxpY2F0ZWRTdG9yYWdlLnJFdmVudHMuZXF1aXBQZXRFdmVudDpGaXJlU2VydmVyKCJlcXVpcFBldCIsIGZvbGRlcikKCQllbmQKCWVuZAplbmQKCnRhYjE6QWRkQnV0dG9uKCJFcXVpcCBTd2lmdCBTYW11cmFpIiwgZnVuY3Rpb24oKQoJZXF1aXBVbmlxdWVQZXQoIlN3aWZ0IFNhbXVyYWkiKQplbmQpCgp0YWIzOkFkZExhYmVsKCJPUCBGQVJNIikKCnRhYjM6QWRkU3dpdGNoKCJQdXNodXBzICsgSnVuZ2xlIFJvY2siLCBmdW5jdGlvbihzdGF0ZSkKICAgIGdldGdlbnYoKS5hdXRvRmFybSA9IHN0YXRlCiAgICBfRy5BdXRvUHVzaHVwcyA9IHN0YXRlCiAgICBhdXRvUHVuY2hOb0FuaW0gPSBzdGF0ZQogICAgc2VsZWN0cm9jayA9ICJBbmNpZW50IEp1bmdsZSBSb2NrIgoKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbwogICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkKICAgICAgICAgICAgaWYgbm90IGdldGdlbnYoKS5hdXRvRmFybSB0aGVuIGJyZWFrIGVuZAoKICAgICAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgbm90IGNoYXJhY3RlciB0aGVuIGNvbnRpbnVlIGVuZAoKICAgICAgICAgICAgLS0gQXV0byBlcXVpcCBQdXNodXBzIHRvb2wKICAgICAgICAgICAgaWYgX0cuQXV0b1B1c2h1cHMgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgcHVzaHVwc1Rvb2wgPSBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlB1c2h1cHMiKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlB1c2h1cHMiKQogICAgICAgICAgICAgICAgaWYgcHVzaHVwc1Rvb2wgdGhlbgogICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wocHVzaHVwc1Rvb2wpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIC0tIEZpcmUgbXVzY2xlRXZlbnQgZm9yIHB1c2h1cHMKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicmVwIikKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAtLSBBdXRvIFB1bmNoIChObyBBbmltYXRpb24pCiAgICAgICAgICAgIGlmIGF1dG9QdW5jaE5vQW5pbSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBwdW5jaFRvb2wgPSBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpCiAgICAgICAgICAgICAgICBpZiBwdW5jaFRvb2wgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIHB1bmNoVG9vbC5QYXJlbnQgfj0gY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcHVuY2hUb29sLlBhcmVudCA9IGNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLm11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInB1bmNoIiwgInJpZ2h0SGFuZCIpCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJwdW5jaCIsICJsZWZ0SGFuZCIpCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHdhcm4oIlB1bmNoIHRvb2wgbm90IGZvdW5kIikKICAgICAgICAgICAgICAgICAgICBhdXRvUHVuY2hOb0FuaW0gPSBmYWxzZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gSnVuZ2xlIFJvY2sgaW50ZXJhY3Rpb24gaWYgRHVyYWJpbGl0eSA+PSAxMCwwMDAsMDAwCiAgICAgICAgICAgIGlmIHBsYXllcjpGaW5kRmlyc3RDaGlsZCgiRHVyYWJpbGl0eSIpIGFuZCBwbGF5ZXIuRHVyYWJpbGl0eS5WYWx1ZSA+PSAxMDAwMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5tYWNoaW5lc0ZvbGRlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAibmVlZGVkRHVyYWJpbGl0eSIgYW5kIHYuVmFsdWUgPT0gMTAwMDAwMDAgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdEhhbmQiKSBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodEhhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5SaWdodEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5SaWdodEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5MZWZ0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLkxlZnRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBnZXR0b29sIHRoZW4gcGNhbGwoZ2V0dG9vbCkgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCwgIlN0YXJ0IikKCi0tIFVuaWZpZWQgdG9nZ2xlOiBBdXRvIFNpdHVwcyArIEp1bmdsZSBSb2NrICsgQXV0byBQdW5jaCAoTm8gQW5pbWF0aW9uKQp0YWIzOkFkZFN3aXRjaCgiQXV0byBTaXR1cHMgKyBKdW5nbGUgUm9jayIsIGZ1bmN0aW9uKHN0YXRlKQogICAgZ2V0Z2VudigpLmF1dG9GYXJtID0gc3RhdGUKICAgIF9HLkF1dG9TaXR1cHMgPSBzdGF0ZQogICAgYXV0b1B1bmNoTm9BbmltID0gc3RhdGUKICAgIHNlbGVjdHJvY2sgPSAiQW5jaWVudCBKdW5nbGUgUm9jayIKCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBnZXRnZW52KCkuYXV0b0Zhcm0gZG8KICAgICAgICAgICAgdGFzay53YWl0KDAuMDEpCiAgICAgICAgICAgIGlmIG5vdCBnZXRnZW52KCkuYXV0b0Zhcm0gdGhlbiBicmVhayBlbmQKCiAgICAgICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgIGlmIG5vdCBjaGFyYWN0ZXIgdGhlbiBjb250aW51ZSBlbmQKCiAgICAgICAgICAgIC0tIEF1dG8gZXF1aXAgU2l0dXBzIHRvb2wKICAgICAgICAgICAgaWYgX0cuQXV0b1NpdHVwcyB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBzaXR1cHNUb29sID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTaXR1cHMiKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNpdHVwcyIpCiAgICAgICAgICAgICAgICBpZiBzaXR1cHNUb29sIHRoZW4KICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHNpdHVwc1Rvb2wpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIC0tIEZpcmUgbXVzY2xlRXZlbnQgZm9yIHNpdHVwcwogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJyZXAiKQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIC0tIEF1dG8gUHVuY2ggKE5vIEFuaW1hdGlvbikKICAgICAgICAgICAgaWYgYXV0b1B1bmNoTm9BbmltIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHB1bmNoVG9vbCA9IHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikKICAgICAgICAgICAgICAgIGlmIHB1bmNoVG9vbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgcHVuY2hUb29sLlBhcmVudCB+PSBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBwdW5jaFRvb2wuUGFyZW50ID0gY2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCAicmlnaHRIYW5kIikKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLm11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInB1bmNoIiwgImxlZnRIYW5kIikKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgd2FybigiUHVuY2ggdG9vbCBub3QgZm91bmQiKQogICAgICAgICAgICAgICAgICAgIGF1dG9QdW5jaE5vQW5pbSA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAtLSBKdW5nbGUgUm9jayBpbnRlcmFjdGlvbiBpZiBEdXJhYmlsaXR5ID49IDEwLDAwMCwwMDAKICAgICAgICAgICAgaWYgcGxheWVyOkZpbmRGaXJzdENoaWxkKCJEdXJhYmlsaXR5IikgYW5kIHBsYXllci5EdXJhYmlsaXR5LlZhbHVlID49IDEwMDAwMDAwIHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLm1hY2hpbmVzRm9sZGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSAxMDAwMDAwMCBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0SGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLlJpZ2h0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLlJpZ2h0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLkxlZnRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBjaGFyYWN0ZXIuTGVmdEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdldHRvb2wgdGhlbiBwY2FsbChnZXR0b29sKSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kLCAiQXV0byBTaXR1cHMsIEp1bmdsZSBSb2NrICYgQXV0byBQdW5jaCAoTm8gQW5pbWF0aW9uKSIpCgotLSBVbmlmaWVkIHRvZ2dsZTogQXV0byBIYW5kc3RhbmRzICsgSnVuZ2xlIFJvY2sgKyBBdXRvIFB1bmNoIChObyBBbmltYXRpb24pCnRhYjM6QWRkU3dpdGNoKCJIYW5kc3RhbmRzICsgSnVuZ2xlIFJvY2siLCBmdW5jdGlvbihzdGF0ZSkKICAgIGdldGdlbnYoKS5hdXRvRmFybSA9IHN0YXRlCiAgICBfRy5BdXRvSGFuZHN0YW5kcyA9IHN0YXRlCiAgICBhdXRvUHVuY2hOb0FuaW0gPSBzdGF0ZQogICAgc2VsZWN0cm9jayA9ICJBbmNpZW50IEp1bmdsZSBSb2NrIgoKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbwogICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkKICAgICAgICAgICAgaWYgbm90IGdldGdlbnYoKS5hdXRvRmFybSB0aGVuIGJyZWFrIGVuZAoKICAgICAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgbm90IGNoYXJhY3RlciB0aGVuIGNvbnRpbnVlIGVuZAoKICAgICAgICAgICAgLS0gQXV0byBlcXVpcCBIYW5kc3RhbmQgdG9vbAogICAgICAgICAgICBpZiBfRy5BdXRvSGFuZHN0YW5kcyB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBoYW5kc3RhbmRUb29sID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIYW5kc3RhbmRzIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIYW5kc3RhbmRzIikKICAgICAgICAgICAgICAgIGlmIGhhbmRzdGFuZFRvb2wgdGhlbgogICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2woaGFuZHN0YW5kVG9vbCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgLS0gRmlyZSBtdXNjbGVFdmVudCBmb3IgaGFuZHN0YW5kcwogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJyZXAiKQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIC0tIEF1dG8gUHVuY2ggKE5vIEFuaW1hdGlvbikKICAgICAgICAgICAgaWYgYXV0b1B1bmNoTm9BbmltIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHB1bmNoVG9vbCA9IHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikKICAgICAgICAgICAgICAgIGlmIHB1bmNoVG9vbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgcHVuY2hUb29sLlBhcmVudCB+PSBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBwdW5jaFRvb2wuUGFyZW50ID0gY2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCAicmlnaHRIYW5kIikKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLm11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInB1bmNoIiwgImxlZnRIYW5kIikKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgd2FybigiUHVuY2ggdG9vbCBub3QgZm91bmQiKQogICAgICAgICAgICAgICAgICAgIGF1dG9QdW5jaE5vQW5pbSA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAtLSBKdW5nbGUgUm9jayBpbnRlcmFjdGlvbiBpZiBEdXJhYmlsaXR5ID49IDEwLDAwMCwwMDAKICAgICAgICAgICAgaWYgcGxheWVyOkZpbmRGaXJzdENoaWxkKCJEdXJhYmlsaXR5IikgYW5kIHBsYXllci5EdXJhYmlsaXR5LlZhbHVlID49IDEwMDAwMDAwIHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLm1hY2hpbmVzRm9sZGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSAxMDAwMDAwMCBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0SGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLlJpZ2h0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLlJpZ2h0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLkxlZnRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBjaGFyYWN0ZXIuTGVmdEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdldHRvb2wgdGhlbiBwY2FsbChnZXR0b29sKSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kLCAiQXV0byBIYW5kc3RhbmRzLCBKdW5nbGUgUm9jayAmIEF1dG8gUHVuY2ggKE5vIEFuaW1hdGlvbikiKQoKdGFiMzpBZGRMYWJlbCgiUm9ja3MiKQoKdGFiMzpBZGRTd2l0Y2goIkp1bmdsZSBSb2NrIiwgZnVuY3Rpb24oVmFsdWUpCiAgICBzZWxlY3Ryb2NrID0gIkFuY2llbnQgSnVuZ2xlIFJvY2siCiAgICBnZXRnZW52KCkuYXV0b0Zhcm0gPSBWYWx1ZQogICAgCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBnZXRnZW52KCkuYXV0b0Zhcm0gZG8KICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgaWYgbm90IGdldGdlbnYoKS5hdXRvRmFybSB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRHVyYWJpbGl0eS5WYWx1ZSA+PSAxMDAwMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLm1hY2hpbmVzRm9sZGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSAxMDAwMDAwMCBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdEhhbmQiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRIYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuTGVmdEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5MZWZ0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dG9vbCgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKCnRhYjM6QWRkU3dpdGNoKCJNdXNjbGUgS2luZyBSb2NrIiwgZnVuY3Rpb24oVmFsdWUpCiAgICBzZWxlY3Ryb2NrID0gIk11c2NsZSBLaW5nIEd5bSBSb2NrIgogICAgZ2V0Z2VudigpLmF1dG9GYXJtID0gVmFsdWUKICAgIAogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgZ2V0Z2VudigpLmF1dG9GYXJtIGRvCiAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgIGlmIG5vdCBnZXRnZW52KCkuYXV0b0Zhcm0gdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkR1cmFiaWxpdHkuVmFsdWUgPj0gNTAwMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLm1hY2hpbmVzRm9sZGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSA1MDAwMDAwIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodEhhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SaWdodEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SaWdodEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5MZWZ0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkxlZnRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBnZXR0b29sKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQoKdGFiMzpBZGRTd2l0Y2goIkxlZ2VuZCBSb2NrIiwgZnVuY3Rpb24oVmFsdWUpCiAgICBzZWxlY3Ryb2NrID0gIkxlZ2VuZCBHeW0gUm9jayIKICAgIGdldGdlbnYoKS5hdXRvRmFybSA9IFZhbHVlCiAgICAKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbwogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICBpZiBub3QgZ2V0Z2VudigpLmF1dG9GYXJtIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EdXJhYmlsaXR5LlZhbHVlID49IDEwMDAwMDAgdGhlbgogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5tYWNoaW5lc0ZvbGRlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAibmVlZGVkRHVyYWJpbGl0eSIgYW5kIHYuVmFsdWUgPT0gMTAwMDAwMCBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdEhhbmQiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRIYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuTGVmdEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5MZWZ0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dG9vbCgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKCnRhYjM6QWRkU3dpdGNoKCJFdGVybmFsIFJvY2siLCBmdW5jdGlvbihWYWx1ZSkKICAgIHNlbGVjdHJvY2sgPSAiRXRlcm5hbCBHeW0gUm9jayIKICAgIGdldGdlbnYoKS5hdXRvRmFybSA9IFZhbHVlCiAgICAKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbwogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICBpZiBub3QgZ2V0Z2VudigpLmF1dG9GYXJtIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EdXJhYmlsaXR5LlZhbHVlID49IDc1MDAwMCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLm1hY2hpbmVzRm9sZGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSA3NTAwMDAgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxlZnRIYW5kIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0SGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJpZ2h0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJpZ2h0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkxlZnRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuTGVmdEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRvb2woKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQpCgp0YWIzOkFkZFN3aXRjaCgiTXl0aGljYWwgUm9jayIsIGZ1bmN0aW9uKFZhbHVlKQogICAgc2VsZWN0cm9jayA9ICJNeXRoaWNhbCBHeW0gUm9jayIKICAgIGdldGdlbnYoKS5hdXRvRmFybSA9IFZhbHVlCiAgICAKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbwogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICBpZiBub3QgZ2V0Z2VudigpLmF1dG9GYXJtIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EdXJhYmlsaXR5LlZhbHVlID49IDQwMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLm1hY2hpbmVzRm9sZGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSA0MDAwMDAgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxlZnRIYW5kIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0SGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJpZ2h0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJpZ2h0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkxlZnRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuTGVmdEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRvb2woKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQpCgp0YWIzOkFkZFN3aXRjaCgiRnJvemVuIFJvY2siLCBmdW5jdGlvbihWYWx1ZSkKICAgIHNlbGVjdHJvY2sgPSAiRnJvc3QgR3ltIFJvY2siCiAgICBnZXRnZW52KCkuYXV0b0Zhcm0gPSBWYWx1ZQogICAgCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBnZXRnZW52KCkuYXV0b0Zhcm0gZG8KICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgaWYgbm90IGdldGdlbnYoKS5hdXRvRmFybSB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRHVyYWJpbGl0eS5WYWx1ZSA+PSAxNTAwMDAgdGhlbgogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5tYWNoaW5lc0ZvbGRlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAibmVlZGVkRHVyYWJpbGl0eSIgYW5kIHYuVmFsdWUgPT0gMTUwMDAwIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodEhhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SaWdodEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SaWdodEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5MZWZ0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkxlZnRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBnZXR0b29sKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQoKdGFiMzpBZGRTd2l0Y2goIkxlZ2VuZCBCZWFjaCBSb2NrIiwgZnVuY3Rpb24oVmFsdWUpCiAgICBzZWxlY3Ryb2NrID0gIkxlZ2VuZCBCZWFjaCBSb2NrIgogICAgZ2V0Z2VudigpLmF1dG9GYXJtID0gVmFsdWUKICAgIAogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgZ2V0Z2VudigpLmF1dG9GYXJtIGRvCiAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgIGlmIG5vdCBnZXRnZW52KCkuYXV0b0Zhcm0gdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkR1cmFiaWxpdHkuVmFsdWUgPj0gNTAwMCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLm1hY2hpbmVzRm9sZGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSA1MDAwIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodEhhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SaWdodEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SaWdodEhhbmQsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5MZWZ0SGFuZCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkxlZnRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBnZXR0b29sKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQoKdGFiMzpBZGRTd2l0Y2goIlN0YXJ0ZXIgUm9jayIsIGZ1bmN0aW9uKFZhbHVlKQogICAgc2VsZWN0cm9jayA9ICJTdGFydGVyIElzbGFuZCBSb2NrIgogICAgZ2V0Z2VudigpLmF1dG9GYXJtID0gVmFsdWUKICAgIAogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgZ2V0Z2VudigpLmF1dG9GYXJtIGRvCiAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgIGlmIG5vdCBnZXRnZW52KCkuYXV0b0Zhcm0gdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkR1cmFiaWxpdHkuVmFsdWUgPj0gMTAwIHRoZW4KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikubWFjaGluZXNGb2xkZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIm5lZWRlZER1cmFiaWxpdHkiIGFuZCB2LlZhbHVlID09IDEwMCBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdEhhbmQiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRIYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuTGVmdEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5MZWZ0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dG9vbCgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKCnRhYjM6QWRkU3dpdGNoKCJUaW55IFJvY2siLCBmdW5jdGlvbihWYWx1ZSkKICAgIHNlbGVjdHJvY2sgPSAiVGlueSBJc2xhbmQgUm9jayIKICAgIGdldGdlbnYoKS5hdXRvRmFybSA9IFZhbHVlCiAgICAKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbwogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICBpZiBub3QgZ2V0Z2VudigpLmF1dG9GYXJtIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EdXJhYmlsaXR5LlZhbHVlID49IDAgdGhlbgogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5tYWNoaW5lc0ZvbGRlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAibmVlZGVkRHVyYWJpbGl0eSIgYW5kIHYuVmFsdWUgPT0gMCBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdEhhbmQiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRIYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmlnaHRIYW5kLCAxKQogICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuTGVmdEhhbmQsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5MZWZ0SGFuZCwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dG9vbCgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKCg==" local __map = {}; (function() local chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/' for i=1,#chars do __map[string.sub(chars,i,i)] = i-1 end end)() local out = {}; local i=1; while i <= #__b do local c1 = __map[string.sub(__b,i,i)]; local c2 = __map[string.sub(__b,i+1,i+1)]; local c3 = __map[string.sub(__b,i+2,i+2)]; local c4 = __map[string.sub(__b,i+3,i+3)]; if not c1 then break end; c2 = c2 or 0; c3 = c3 or 0; c4 = c4 or 0; local n = c1*262144 + c2*4096 + c3*64 + c4; local b1 = math.floor(n/65536) % 256; local b2 = math.floor(n/256) % 256; local b3 = n % 256; out[#out+1] = string.char(b1); if string.sub(__b,i+2,i+2) ~= '=' then out[#out+1] = string.char(b2) end; if string.sub(__b,i+3,i+3) ~= '=' then out[#out+1] = string.char(b3) end; i = i + 4 end; local decoded = table.concat(out) local ok,err = pcall(function() local loader = loadstring or load local f = loader(decoded) if type(f) == 'function' then f() end end) if not ok then pcall(function() print('RMPG wrapper error: '..tostring(err)) end) end end)()
